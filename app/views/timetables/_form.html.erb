<script>
  function duplicate() {
    var original = document.getElementById('timetable-id');
    var duplicater_target = document.getElementById('duplicater_target');
    <%#*var clone = original%>
    <%#*clone.id = "duplicetor" + ++i; // there can only be one element with an ID%>
    duplicater_target.innerHTML += original.innerHTML;
  }
</script>
<div align="center">
<%#= error_messages_for 'timetable' %>

  <!--[form:timetable]-->

  <%
  jams = ["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]
  minits = ["00","30"]

  @timetable.date = params[:date]
  @timetable.course_implementation_id = params[:course_implementation_id]
%>	 

  <!--table width="90%" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr>
      <td align="center"><u><%#= link_to 'Kembali ', :action => 'list', :course_implementation_id => @timetable.course_implementation_id  %> </u> ke Senarai Kursus  </td>
    </tr>
  </table!-->
  <br>
  <table width="95%" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#eeeeee">
    <tr>
      <%= hidden_field 'timetable', 'date' %>
      <%= hidden_field 'timetable','course_implementation_id' %>
      <td align="right"><strong>Waktu:</strong></td>
      <td><span class="blockintro">&nbsp;
          <select name="start_hour">
            <%
            thejami = params[:time_start]
            thejam = thejami.split(':')
            jam1 = thejam[0]
            min1 = thejam[1]

            x=0
            for jam in jams %>
              <option value= "<%= jams[x] %>"
                      <% if (jams[x] == jam1) %> selected <% end%> ><%= jams[x] %></option>
                      <%	 x = x + 1
                    end  %>
          </select>:
          <select name="start_minute">
            <%
            y=0
            for minit in minits %>
              <option value= "<%= minits[y] %>"
                      <% if (minits[y] == min1) %> selected <% end%> ><%= minits[y] %></option>
                      <%	 y = y + 1
                    end  %>
          </select> -
          <select name="end_hour">
            <%
            tjami = params[:time_end]
            tjam = tjami.split(':')
            tjam1 = tjam[0]
            tmin1 = tjam[1]

            x=0
            for jam in jams %>
              <option value= "<%= jams[x] %>"
                      <% if (jams[x] == tjam1) %> selected <% end%> ><%= jams[x] %></option>
                      <%	 x = x + 1
                    end  %>
          </select>:
          <select name="end_minute">
            <%
            y=0
            for minit in minits %>
              <option value= "<%= minits[y] %>"
                      <% if (minits[y] == tmin1) %> selected <% end%>><%= minits[y] %></option>
                      <%	 y = y + 1
                    end  %>
          </select>
        </span></td>
    </tr>

    <tr>
      <td align="right"><strong>Tajuk: </strong></td>
      <td><span class="blockintro"> &nbsp;
          <%= text_field 'timetable', 'topic', :maxlength=>250, :size=>50 %>      </span></td>
    </tr>

    <tr>
      <td align="right" valign=top><strong>Keterangan:</strong></td>
      <td><span class="blockintro">&nbsp;
          <%= text_area 'timetable', 'description', :rows=>3 , :cols=>35  %>      </span></td>
    </tr>

    <tr>
      <td align="right"><strong>Pengajar:</strong></td>
      <td>&nbsp;
        <%
        sql = "SELECT t.id,t.profile_id,p.name from course_implementations_trainers as ci_t JOIN trainers as t ON t.id=ci_t.trainer_id JOIN profiles as p on p.id=t.profile_id where course_implementation_id = #{@course_implementation.id} ORDER BY name"
        @trainers = Trainer.find_by_sql(sql)
      %>
        <span  id="timetable-id">
        <select name="timetable[trainer_ids][]">
          <% @trainers.each do |t| %>
            <option value="<%= t.id %>" <%= 'selected' if @timetable.trainers.include?(t) %>>
              <%= t.profile.name.upcase %></option>
            select(:profile, :religion_id, @options, "" ,:style=>"width: 100;")
          <% end %>
        </select>
          </span>
        <a href="javascript: a(<%=@course_implementation.id%>);"><font style="color: blue">tambah/padam</font></a> &nbsp;|&nbsp;
        <a href="#" onclick="duplicate();">Tambah Pengajar</a> <br />
        <div id="duplicater_target">
        </div>
      </td>
    </tr>
    <script>
      function a(id) {
        MM_openBrWindow('/course_implementations/'+id+'/add_course_trainer_refresh_opener','','scrollbars=yes,width=600,height=600')
      }
    </script>    
  </table>
